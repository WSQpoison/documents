# 类与子系统设计

## 确定类的设计

&nbsp;&nbsp;&nbsp;&nbsp;对于数据库每张表都有一个直属上层关键抽象类封装信息，除此之外，还具有对应控制类实现对实体类的读取和写入。对于每一个页面，都应提供一个接口类向用户展示相关信息并提供可执行的操作。

![总体类设计][1]


  [1]: /images/classDesign.png
  
关键类设计在关键抽象章节已经介绍，定义如下控制类：

### 用户控制类

&nbsp;&nbsp;&nbsp;&nbsp;提供创建用户，修改用户信息，获取用户好友列表，群列表等操作。

![用户控制类][2]


  [2]: /images/userControl.png
  
### 好友控制类

&nbsp;&nbsp;&nbsp;&nbsp;提供查看、处理、发出好友申请，删除好友等操作。

![好友控制类][3]


  [3]: /images/friendControl.png
  
### 群控制类

&nbsp;&nbsp;&nbsp;&nbsp;提供群创建，修改群信息，解散群，获取群成员列表等操作

![群控制类][4]


  [4]: /images/groupControl.png
  
### 聊天记录控制类

&nbsp;&nbsp;&nbsp;&nbsp;提供对聊天记录的查看，发送等操作。

![聊天记录控制类][5]


  [5]: /images/recordControl.png
  
## 子系统划分

&nbsp;&nbsp;&nbsp;&nbsp;本项目根据控制类划分了如下子系统：

### 用户子系统

&nbsp;&nbsp;&nbsp;&nbsp;包括用户信息查询、修改，用户注册、登录以及用户搜索。

![用户子系统][6]


  [6]: /images/userSubSystem.png
  
### 群子系统

&nbsp;&nbsp;&nbsp;&nbsp;包括群申请、邀请查询及处理，群管理，群信息查询，群搜索。

![群子系统][7]


  [7]: /images/groupSubSystem.png
  
### 消息子系统

&nbsp;&nbsp;&nbsp;&nbsp;包括群、好友消息的获取，发送，

![消息子系统][8]


  [8]: /images/recordSubSystem.png

### 好友子系统

&nbsp;&nbsp;&nbsp;&nbsp;包括好友申请的发送、查看、处理，以及用户间好友关系的记录。

![好友子系统][9]


  [9]: /images/friendSubSystem.png

## 子系统及其接口设计

&nbsp;&nbsp;&nbsp;&nbsp;该项目的子系统设计如上图，用户通过注册，能够获取相应权限并进行正常使用。

&nbsp;&nbsp;&nbsp;&nbsp;各个子系统通过边界类(接口)与其他子系统进行数据的交互，通过接口将不同的子系统逻辑分离。同时，数据也由接口完成传输，这样实现了系统间的低耦合。在调用每个子系统功能时，只能通过调用其暴露在外的接口。对于用户从客户端传来的信息，我们定义类Handle来控制不同子系统完成一个基本操作。

![子系统及其接口图][10]


  [10]: /images/subsystemAndInterface.png
